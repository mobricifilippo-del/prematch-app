<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PreMatch — Demo</title>
<meta name="description" content="PreMatch — Semplice. Pulita. Gratuita.">
<style>
:root{
  --bg:#0b1422; --panel:#0e1c2f; --panel2:#0b1727; --line:#19314d;
  --text:#e7edf6; --muted:#a7b6c9; --ok:#19c37d; --primary:#2b6dd8; --radius:16px;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial}
a{color:inherit;text-decoration:none}
.wrap{max-width:980px;margin:0 auto;padding:20px}

/* NAV */
.topbar{position:sticky;top:0;z-index:40;background:#0b1422cc;backdrop-filter:blur(6px);border-bottom:1px solid #0f2239}
.nav{display:flex;align-items:center;gap:18px;padding:14px 16px}
.logoRing{width:28px;height:28px;border-radius:50%;border:2px solid #23b46f;display:grid;place-items:center}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.tabs{display:flex;gap:10px;margin-left:auto}
.tab{padding:8px 12px;border-radius:10px}
.tab.active{background:#13243a}

/* HOME */
.hero{margin-top:16px;padding:20px;background:var(--panel);border:1px solid var(--line);border-radius:var(--radius)}
.hero h1{margin:0 0 8px;font-size:34px}
.hero p{margin:0;color:var(--muted)}
.cards{display:grid;gap:14px;margin-top:14px}
@media(min-width:700px){.cards{grid-template-columns:1fr}}
.card{background:var(--panel2);border:1px solid var(--line);border-radius:14px;padding:16px;display:flex;align-items:center;gap:14px}
.iconRing{width:56px;height:56px;display:grid;place-items:center;border-radius:50%;border:2px solid #2a445f;background:#0b1727}
.card h3{margin:0 0 2px;font-size:22px}
.card small{color:var(--muted)}
.spacer{flex:1}
.btn{appearance:none;border:1px solid var(--line);background:#0f1e30;color:#dfe8f5;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
.btn.primary{background:#1f4272;border-color:#2a558f}
.btn:hover{filter:brightness(1.06)}

/* VIEW 2 */
.view{display:none}
.view.active{display:block}
.box{margin-top:16px;padding:20px;background:var(--panel);border:1px solid var(--line);border-radius:var(--radius)}
h2{margin:0 0 10px}
.grid{display:grid;gap:10px}
@media(min-width:700px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
.region{padding:10px;border-radius:12px;background:#0b1727;border:1px solid var(--line);cursor:pointer}
.region.active{outline:2px solid #2b6dd8}
.sel{width:100%;padding:12px;border-radius:12px;background:#0b1727;color:var(--text);border:1px solid var(--line)}
.clubs{margin-top:14px;display:grid;gap:12px}
@media(min-width:700px){.clubs{grid-template-columns:1fr 1fr}}
.club{background:#0c1b2d;border:1px solid var(--line);border-radius:14px;padding:14px;display:grid;gap:8px}
.row{display:flex;align-items:center;gap:10px}
.badge{font-weight:700;font-size:13px;border-radius:9px;padding:6px 8px}
.ok{background:#123727;color:#a8f0cf;border:1px solid #1e6c4f}
.pending{background:#2c1f08;color:#ffd9a6;border:1px solid #7a5212}

/* FOOTER */
footer{margin:26px 0;color:#b8c6dc} footer a{text-decoration:underline}
</style>
</head>
<body>
  <div class="topbar">
    <div class="wrap nav">
      <div class="brand">
        <div class="logoRing">
          <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
            <circle cx="8" cy="8" r="6" fill="#0b1422"/>
            <path d="M8 3l2 1-1 2H7L6 4l2-1Z" fill="#23b46f"/>
          </svg>
        </div>
        PreMatch
      </div>
      <div class="tabs">
        <div class="tab active">Sport</div>
        <div class="tab">Home</div>
        <div class="tab">Accedi/Registra</div>
      </div>
    </div>
  </div>

  <main class="wrap">
    <!-- ====== VIEW 1: HOME ====== -->
    <section id="view-home" class="view active">
      <div class="hero">
        <h1>Scegli lo sport</h1>
        <p>Naviga le società e scopri le prossime partite. Nessuna registrazione richiesta per esplorare.</p>
        <div class="cards" id="sportCards"></div>
      </div>
      <footer>PreMatch © 2025 — <em>Semplice. Pulita. Gratuita.</em> · <a href="#">Privacy</a> · <a href="#">Supporto</a></footer>
    </section>

    <!-- ====== VIEW 2: SPORT → REGIONE → GENERE → CAMPIONATO ====== -->
    <section id="view-sport" class="view">
      <button class="btn" id="backBtn">← Torna agli sport</button>
      <div class="box">
        <h2 id="sportTitle">Seleziona la regione</h2>
        <div class="grid cols-3" id="regionGrid"></div>
      </div>
      <div class="box" id="step2" style="display:none">
        <h2>Genere e campionato</h2>
        <div class="grid cols-3">
          <div>
            <label for="genderSel">Genere</label>
            <select id="genderSel" class="sel">
              <option value="maschile">Maschile</option>
              <option value="femminile">Femminile</option>
            </select>
          </div>
          <div>
            <label for="leagueSel">Campionato</label>
            <select id="leagueSel" class="sel"></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn primary" id="applyBtn" style="width:100%">Applica</button>
          </div>
        </div>
        <div class="clubs" id="clubList"></div>
      </div>
    </section>
  </main>

<script>
/* ====== ICONE “PALLONI” come nello screenshot ====== */
function ballIcon(kind){
  // palette per sport
  const pal = {
    calcio:"#28d17c",  // verde
    futsal:"#ffb22e",  // giallo/arancio
    basket:"#ff7a21",  // arancio
    volley:"#9b8cff",  // lilla
    rugby:"#f4a933"    // oro
  }[kind] || "#58c";
  // cerchio base + pallone interno per ogni sport
  const base = (inner)=>`
  <svg width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
    <circle cx="22" cy="22" r="18" fill="#0b1727" stroke="${pal}" stroke-width="2"/>
    ${inner}
  </svg>`;

  // 1) Calcio: pallone semplice b/n
  if(kind==='calcio'){
    const inner = `
      <circle cx="22" cy="22" r="12" fill="#0f1a27" stroke="${pal}" stroke-width="2"/>
      <circle cx="22" cy="22" r="7" fill="#e8eef6"/>
      <path d="M22 16l3 2-1 3h-4l-1-3 3-2Z" fill="#0b1422"/>
      <path d="M22 28l-3-2 1-3h4l1 3-3 2Z" fill="#0b1422"/>
      <path d="M16 22l2-3 3 1v4l-3 1-2-3Zm12 0l-2-3-3 1v4l3 1 2-3Z" fill="#0b1422"/>`;
    return base(inner);
  }
  // 2) Futsal: stella/pallone
  if(kind==='futsal'){
    const inner = `
      <circle cx="22" cy="22" r="12" fill="#0f1a27" stroke="${pal}" stroke-width="2"/>
      <g fill="${pal}">
        <path d="M22 14l2.2 4.5 5 .7-3.6 3.5.9 5-4.5-2.3-4.5 2.3.9-5-3.6-3.5 5-.7L22 14Z"/>
      </g>`;
    return base(inner);
  }
  // 3) Basket: linee classiche
  if(kind==='basket'){
    const inner = `
      <circle cx="22" cy="22" r="12" fill="#241108" stroke="${pal}" stroke-width="2"/>
      <path d="M22 10v24M10 22h24M15 15c4 4 10 4 14 0M29 29c-4-4-10-4-14 0"
            stroke="${pal}" stroke-width="2" fill="none" stroke-linecap="round"/>`;
    return base(inner);
  }
  // 4) Volley: spicchi curvi
  if(kind==='volley'){
    const inner = `
      <circle cx="22" cy="22" r="12" fill="#1a1830" stroke="${pal}" stroke-width="2"/>
      <path d="M14 21c6-6 14-4 16-1M14 24c6 6 14 4 16 1M18 14c-2 8 1 14 7 17"
            stroke="${pal}" stroke-width="2" fill="none" stroke-linecap="round"/>`;
    return base(inner);
  }
  // 5) Rugby: ovale + cuciture
  if(kind==='rugby'){
    const inner = `
      <ellipse cx="22" cy="22" rx="12" ry="8" fill="#1f1608" stroke="${pal}" stroke-width="2"/>
      <path d="M16 22h12M19 20l6 4M19 24l6-4" stroke="${pal}" stroke-width="2" stroke-linecap="round"/>`;
    return base(inner);
  }
  return base('');
}

/* ====== DATI ====== */
const SPORTS = [
  {id:'calcio',name:'Calcio'},{id:'futsal',name:'Futsal'},
  {id:'basket',name:'Basket'},{id:'volley',name:'Volley'},{id:'rugby',name:'Rugby'},
];
const IT_REGIONS = ["Abruzzo","Basilicata","Calabria","Campania","Emilia-Romagna","Friuli-Venezia Giulia","Lazio","Liguria","Lombardia","Marche","Molise","Piemonte","Puglia","Sardegna","Sicilia","Toscana","Trentino-Alto Adige","Umbria","Valle d'Aosta","Veneto"];
const LEAGUES = {
  calcio:{ maschile:["Eccellenza","Promozione","Prima Categoria","Juniores","Allievi U17","Giovanissimi U15","Scuola Calcio"],
           femminile:["Serie C","Eccellenza","Juniores","Allieve U17","Giovanissime U15","Scuola Calcio"] },
  futsal:{ maschile:["Serie C1","Serie C2","D Juniores","U17","U15","Scuola Calcio a 5"],
           femminile:["Serie C","Juniores","U17","U15","Scuola Calcio a 5"] },
  basket:{ maschile:["Serie C","Promozione","U19","U17","U15","Minibasket"],
           femminile:["Serie B","U19","U17","U15","Minibasket"] },
  volley:{ maschile:["Serie C","Serie D","U19","U17","U15","Minivolley"],
           femminile:["Serie C","Serie D","U18","U16","U14","Minivolley"] },
  rugby :{ maschile:["Serie C","U19","U17","U15","Propaganda"],
           femminile:["Serie A7","U17","U15","Propaganda"] }
};
const CLUBS = [
  {name:"ASD Roma Nord",      sport:"calcio", region:"Lazio",    gender:"maschile",   league:"Eccellenza",       verified:true},
  {name:"SSD Latina Women",   sport:"calcio", region:"Lazio",    gender:"femminile",  league:"Serie C",          verified:false},
  {name:"Futsal Ostia",       sport:"futsal", region:"Lazio",    gender:"maschile",   league:"Serie C1",         verified:true},
  {name:"Virtus Basket Roma", sport:"basket", region:"Lazio",    gender:"maschile",   league:"Promozione",       verified:false},
  {name:"Volley Viterbo",     sport:"volley", region:"Lazio",    gender:"femminile",  league:"Serie D",          verified:true},
  {name:"CUS Milano Rugby",   sport:"rugby",  region:"Lombardia",gender:"maschile",   league:"Serie C",          verified:false},
  {name:"Giovani Aquile",     sport:"calcio", region:"Lazio",    gender:"maschile",   league:"Scuola Calcio",    verified:true},
  {name:"Aurora Girls",       sport:"volley", region:"Toscana",  gender:"femminile",  league:"U16",              verified:false},
];

/* ====== DOM ====== */
const $=s=>document.querySelector(s);
const sportCards=$("#sportCards");
const vHome=$("#view-home"), vSport=$("#view-sport");
const regionGrid=$("#regionGrid"), genderSel=$("#genderSel"), leagueSel=$("#leagueSel");
const clubList=$("#clubList"), backBtn=$("#backBtn"), sportTitle=$("#sportTitle");

let CURRENT={sport:null,region:null,gender:'maschile',league:null};

/* ====== HOME (immutabile) ====== */
function drawSports(){
  sportCards.innerHTML = SPORTS.map(s=>`
    <div class="card">
      <div class="iconRing">${ballIcon(s.id)}</div>
      <div><h3>${s.name}</h3><small>Esplora società</small></div>
      <div class="spacer"></div>
      <button class="btn" data-action="soc" data-id="${s.id}">Società</button>
      <button class="btn primary" data-action="open" data-id="${s.id}">Apri</button>
    </div>`).join('');
  sportCards.querySelectorAll("button").forEach(b=>{
    b.addEventListener("click",()=>openSport(b.dataset.id));
  });
}

/* ====== VIEW 2 ====== */
function openSport(id){
  CURRENT={sport:id,region:null,gender:'maschile',league:null};
  sportTitle.textContent = `Seleziona la regione — ${cap(id)}`;
  regionGrid.innerHTML = IT_REGIONS.map(r=>`<div class="region" data-r="${r}">${r}</div>`).join('');
  regionGrid.querySelectorAll(".region").forEach(el=>{
    el.onclick=()=>{ CURRENT.region=el.dataset.r; regionGrid.querySelectorAll(".region").forEach(x=>x.classList.remove('active')); el.classList.add('active'); step2(); };
  });
  vHome.classList.remove('active'); vSport.classList.add('active');
  window.scrollTo({top:0,behavior:'instant'});
}
function step2(){
  $("#step2").style.display='';
  genderSel.value=CURRENT.gender;
  populateLeagues();
  renderClubs();
}
function populateLeagues(){
  const arr=(LEAGUES[CURRENT.sport]||{})[CURRENT.gender]||[];
  leagueSel.innerHTML = arr.map(l=>`<option ${l===CURRENT.league?'selected':''}>${l}</option>`).join('');
  if(!CURRENT.league) CURRENT.league=leagueSel.value||null;
}
function renderClubs(){
  const out = CLUBS.filter(c =>
    c.sport===CURRENT.sport &&
    (!CURRENT.region||c.region===CURRENT.region) &&
    (!CURRENT.gender||c.gender===CURRENT.gender) &&
    (!CURRENT.league||c.league===CURRENT.league)
  );
  clubList.innerHTML = out.length ? out.map(c=>`
    <div class="club">
      <div class="row">
        <div class="iconRing" style="width:44px;height:44px">${ballIcon(c.sport)}</div>
        <div class="spacer">
          <div style="font-weight:800">${c.name}</div>
          <small style="color:var(--muted)">${cap(c.sport)} · ${c.region} · ${cap(c.gender)} · ${c.league}</small>
        </div>
        <span class="badge ${c.verified?'ok':'pending'}">${c.verified?'✅ PreMatch confermato':'⏳ In attesa di verifica'}</span>
      </div>
    </div>`).join('')
  : `<div class="club"><strong>Nessuna società trovata</strong>
     <small style="color:var(--muted)">Scegli un altro campionato o regione.</small></div>`;
}
const cap=s=>s?s[0].toUpperCase()+s.slice(1):s;

/* Bind */
backBtn.onclick=()=>{ vSport.classList.remove('active'); vHome.classList.add('active'); window.scrollTo({top:0,behavior:'instant'}); };
$("#applyBtn").onclick=renderClubs;
genderSel.onchange=(e)=>{ CURRENT.gender=e.target.value; CURRENT.league=null; populateLeagues(); };
leagueSel.onchange=(e)=>{ CURRENT.league=e.target.value; };

/* init */
drawSports();
</script>
</body>
</html>
