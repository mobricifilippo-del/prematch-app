<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PreMatch — Demo</title>
<meta name="description" content="PreMatch: scegli lo sport, filtra per regione e campionato, esplora le società."/>
<style>
  :root{
    --bg:#0b1220; --panel:#121a2a; --soft:#162136; --text:#e8f0ff;
    --muted:#9fb0cf; --brand:#1ec97f; --brand-2:#47a5ff; --chip:#0e2947;
    --card:#0f1a2b; --border:#1f2c47; --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1200px 600px at 20% -20%, #15243d 0%, transparent 60%) no-repeat,
               radial-gradient(1000px 500px at 120% -40%, #122039 0%, transparent 60%) no-repeat,
               var(--bg);
    color:var(--text); font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,sans-serif;
  }
  a{color:inherit; text-decoration:none}
  header{
    position:sticky; top:0; z-index:5; backdrop-filter:saturate(180%) blur(8px);
    background:rgba(11,18,32,.7); border-bottom:1px solid var(--border);
  }
  .bar{max-width:980px; margin:auto; padding:14px 16px; display:flex; gap:12px; align-items:center}
  .logo{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px}
  .badge{width:34px;height:34px;border-radius:50%;display:grid;place-items:center;
         background:conic-gradient(from 180deg at 50% 50%, #36d58c, #2ec8ff); box-shadow:0 0 0 3px #0a1426}
  .btn{padding:10px 14px; background:#0f223b; border:1px solid var(--border); color:#d8e7ff;
       border-radius:12px; font-weight:600}
  .btn.primary{background:linear-gradient(135deg,#1ec97f,#16b36e); border-color:transparent; color:#072013}
  .wrap{max-width:980px; padding:22px 16px 80px; margin:auto}
  h1{font-size:28px; margin:16px 4px 8px}
  p.lead{color:var(--muted); margin:0 4px 20px}

  .list{display:flex; flex-direction:column; gap:14px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.02)), var(--panel);
    border:1px solid var(--border); border-radius:18px; padding:14px 14px; box-shadow:var(--shadow);
    cursor:pointer;
  }
  .sport-row{display:flex; align-items:center; justify-content:space-between; gap:14px}
  .left{display:flex; align-items:center; gap:14px}
  .icon{width:46px;height:46px;border-radius:50%; display:grid; place-items:center;
        background:radial-gradient(circle at 30% 30%, #fff6, transparent 55%), #133459;
        border:1px solid #2b466c; box-shadow:inset 0 0 0 2px #0e2947}
  .title{font-size:20px; font-weight:700}
  .sub{color:var(--muted); font-size:14px}
  .right{display:flex; gap:8px}
  .chip{font-size:13px; background:var(--chip); border:1px solid #1f3a61; color:#b9cbec;
        padding:8px 10px; border-radius:999px}
  .cta{background:linear-gradient(135deg,#47a5ff,#2e88ff); color:white; border:none;
       padding:9px 14px; border-radius:12px; font-weight:700}
  .cta:active{transform:translateY(1px)}

  .step{display:flex; gap:8px; flex-wrap:wrap; margin:6px 4px 18px}
  .step span{padding:7px 10px; border:1px dashed #2a4065; border-radius:10px; color:#b9cbec; background:#0f2139}
  .grid{display:grid; gap:12px; grid-template-columns:repeat(2,1fr)}
  @media(min-width:700px){ .grid{grid-template-columns:repeat(3,1fr)} }
  .tile{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px 14px; cursor:pointer}
  .tile strong{display:block; margin-bottom:6px}
  .tile small{color:var(--muted)}

  footer{border-top:1px solid var(--border); padding:28px 16px; text-align:center; color:var(--muted)}
  footer a{color:#b9cbec; text-decoration:underline; text-decoration-color:#335a93}
  .hidden{display:none !important}
  .back{margin:8px 4px 16px; display:inline-flex; gap:8px; align-items:center;
        color:#b9cbec; background:#0f223b; border:1px solid var(--border); padding:8px 10px; border-radius:10px}
  noscript{display:block; background:#3a1f0f; color:#fff; padding:10px 14px; border-left:4px solid #ff9647; margin:10px 0; border-radius:8px}
</style>
</head>
<body>
<header>
  <div class="bar">
    <div class="logo"><span class="badge" aria-hidden="true">⚽</span>PreMatch</div>
    <div style="flex:1"></div>
    <a href="#" class="btn">Crea account sponsor</a>
    <a href="#" class="btn primary">Login</a>
  </div>
</header>

<main class="wrap">
  <noscript>JavaScript è disabilitato: l’esplorazione interattiva non funzionerà.</noscript>

  <section id="view-home">
    <h1>Scegli lo sport</h1>
    <p class="lead">Naviga le società e scopri le prossime partite. Nessuna registrazione richiesta per esplorare.</p>
    <div id="sportList" class="list"></div>
  </section>

  <section id="view-region" class="hidden">
    <button class="back" onclick="goBack()">⟵ Indietro</button>
    <h1 id="regionTitle">Seleziona la regione</h1>
    <p class="lead">Scegli la tua regione per continuare.</p>
    <div class="grid" id="regionGrid"></div>
  </section>

  <section id="view-league" class="hidden">
    <button class="back" onclick="goBack()">⟵ Indietro</button>
    <h1 id="leagueTitle">Scegli il campionato</h1>
    <div class="step" id="crumbLeague"></div>
    <div class="grid" id="leagueGrid"></div>
  </section>

  <section id="view-clubs" class="hidden">
    <button class="back" onclick="goBack()">⟵ Indietro</button>
    <h1 id="clubsTitle">Società</h1>
    <div class="step" id="crumbClubs"></div>
    <div class="list" id="clubList"></div>
  </section>

  <section id="view-club-detail" class="hidden">
    <button class="back" onclick="goBack()">⟵ Indietro</button>
    <h1 id="clubName">Società</h1>
    <div class="step" id="crumbDetail"></div>
    <div class="card" style="cursor:auto">
      <div class="sport-row" style="align-items:flex-start; cursor:auto">
        <div>
          <div id="clubStatus" class="chip">Stato: —</div>
          <p class="lead" id="clubAbout" style="margin-top:10px">Informazioni società.</p>
          <div class="grid">
            <div class="tile" style="cursor:auto"><strong>Prossima partita</strong><small id="clubNext">—</small></div>
            <div class="tile" style="cursor:auto"><strong>Stadio</strong><small id="clubVenue">—</small></div>
            <div class="tile" style="cursor:auto"><strong>Contatti</strong><small id="clubContact">—</small></div>
          </div>
        </div>
        <button class="cta" onclick="alert('Funzione demo')">Vedi Pre-Match</button>
      </div>
    </div>
  </section>
</main>

<footer>
  © 2025 PreMatch — Semplice. Pulita. Gratuita. ·
  <a href="#">Privacy</a> · <a href="#">Supporto</a>
</footer>

<script>
/* ---------- DATI DEMO ---------- */
const SPORTS = [
  { id:'calcio',  name:'Calcio',  icon:ball('soccer'),  color:'#1ec97f'},
  { id:'futsal',  name:'Futsal',  icon:ball('futsal'),  color:'#ffd549'},
  { id:'basket',  name:'Basket',  icon:ball('basket'),  color:'#ff9647'},
  { id:'volley',  name:'Volley',  icon:ball('volley'),  color:'#c5c7ff'},
  { id:'rugby',   name:'Rugby',   icon:ball('rugby'),   color:'#ffa24f'}
];

const REGIONS = [
  'Piemonte','Lombardia','Veneto','Emilia-Romagna','Toscana',
  'Lazio','Campania','Puglia','Sicilia','Sardegna'
];

const LEAGUES = {
  calcio:['Eccellenza','Promozione','Prima Categoria'],
  futsal:['Serie C1','Serie C2'],
  basket:['Serie C Unica','Promozione'],
  volley:['Serie C','Serie D'],
  rugby:['Serie C','Serie B']
};

// club demo per chiave: sport|regione|league
const CLUBS = {
  'calcio|Lazio|Eccellenza':[
    {slug:'asd-roma-nord', name:'ASD Roma Nord', status:'verificata', next:'Dom 18:00 vs Ostia', venue:'Via delle Palme 12, Roma', contact:'romanord@example.com'},
    {slug:'sporting-tivoli', name:'Sporting Tivoli', status:'in verifica', next:'Sab 15:00 @ Monterotondo', venue:'Stadio Tivoli', contact:'tivoli@example.com'}
  ],
  'basket|Lombardia|Serie C Unica':[
    {slug:'brescia-young', name:'Brescia Young', status:'verificata', next:'Sab 20:30 vs Seregno', venue:'PalaBrescia', contact:'info@bresiayoung.it'}
  ],
  'volley|Veneto|Serie C':[
    {slug:'imoco-conegliano', name:'Imoco Conegliano', status:'verificata', next:'Sab 17:00 vs Padova', venue:'Kione Arena', contact:'segreteria@imoco.it'},
    {slug:'lube-civitanova', name:'Lube Civitanova', status:'in verifica', next:'Dom 19:00 @ Macerata', venue:'Eurosuole Forum', contact:'contatti@lube.it'}
  ]
};

/* ---------- STATO / STACK ---------- */
const stack = []; // per back
let state = { sport:null, region:null, league:null, club:null };

function pushView(id){ stack.push(id); show(id); }
function goBack(){
  stack.pop(); // rimuovi attuale
  const prev = stack.pop(); // quello da mostrare (pop perché show fa push)
  if(prev) show(prev, false); else show('view-home', false);
}
function show(id, doPush=true){
  document.querySelectorAll('main > section').forEach(s=>s.classList.add('hidden'));
  const el = document.getElementById(id);
  el.classList.remove('hidden');
  if(doPush) stack.push(id);
  // FIX: 'instant' su alcuni browser blocca. Usiamo 'auto'.
  try{ window.scrollTo({top:0, behavior:'auto'}); }catch(_){ window.scrollTo(0,0); }
}

/* ---------- RENDER ---------- */
function renderHome(){
  const list = document.getElementById('sportList');
  list.innerHTML = '';
  SPORTS.forEach(s=>{
    const div = document.createElement('div');
    div.className = 'card';
    div.setAttribute('role','button');
    div.setAttribute('aria-label',`Apri ${s.name}`);
    div.innerHTML = `
      <div class="sport-row">
        <div class="left">
          <div class="icon" style="background:radial-gradient(circle at 30% 30%, #fff4, transparent 55%), ${shade(s.color)}; border:1px solid ${border(s.color)}">${s.icon}</div>
          <div>
            <div class="title">${s.name}</div>
            <div class="sub">Esplora società</div>
          </div>
        </div>
        <div class="right">
          <span class="chip">Società</span>
          <button class="cta" aria-label="Apri ${s.name}">Apri</button>
        </div>
      </div>`;
    // click sia sul bottone che sulla card
    div.onclick = (e)=> {
      // evita doppio click se preme il chip
      if(e.target.classList.contains('chip')) return;
      openSport(s.id);
    };
    list.appendChild(div);
  });
}

function openSport(sportId){
  state = { sport:sportId, region:null, league:null, club:null };
  document.getElementById('regionTitle').textContent = `Seleziona la regione (${labelSport(sportId)})`;
  const grid = document.getElementById('regionGrid');
  grid.innerHTML = '';
  REGIONS.forEach(r=>{
    const t = document.createElement('div');
    t.className = 'tile'; t.tabIndex=0;
    t.innerHTML = `<strong>${r}</strong><small>Vai alle società</small>`;
    t.onclick = ()=>openRegion(r);
    grid.appendChild(t);
  });
  pushView('view-region');
}

function openRegion(region){
  state.region = region;
  const title = document.getElementById('leagueTitle');
  title.textContent = `Scegli il campionato — ${region}`;
  const crumbs = document.getElementById('crumbLeague');
  crumbs.innerHTML = crumbHTML();
  const grid = document.getElementById('leagueGrid');
  grid.innerHTML = '';
  (LEAGUES[state.sport] || []).forEach(l=>{
    const t = document.createElement('div');
    t.className = 'tile';
    t.innerHTML = `<strong>${l}</strong><small>Apri elenco società</small>`;
    t.onclick = ()=>openLeague(l);
    grid.appendChild(t);
  });
  pushView('view-league');
}

function openLeague(league){
  state.league = league;
  document.getElementById('clubsTitle').textContent = `Società — ${league}`;
  document.getElementById('crumbClubs').innerHTML = crumbHTML();
  const key = `${state.sport}|${state.region}|${league}`;
  const clubs = CLUBS[key] || [];
  const list = document.getElementById('clubList');
  list.innerHTML = '';
  if(!clubs.length){
    const empty = document.createElement('div');
    empty.className='card';
    empty.innerHTML = `<div class="sub">Ancora nessuna società registrata in questa combinazione. (Demo)</div>`;
    list.appendChild(empty);
  } else {
    clubs.forEach(c=>{
      const div = document.createElement('div');
      div.className='card';
      div.innerHTML = `
        <div class="sport-row">
          <div class="left">
            <div class="icon">${ball('club')}</div>
            <div>
              <div class="title">${c.name}</div>
              <div class="sub">${c.status==='verificata'?'✅ Verificata':'⏳ In verifica'}</div>
            </div>
          </div>
          <button class="cta">Apri</button>
        </div>`;
      div.onclick = ()=>openClub(c);
      list.appendChild(div);
    });
  }
  pushView('view-clubs');
}

function openClub(c){
  state.club = c.slug;
  document.getElementById('clubName').textContent = c.name;
  document.getElementById('crumbDetail').innerHTML = crumbHTML();
  const badge = document.getElementById('clubStatus');
  badge.textContent = (c.status==='verificata'?'✅ Verificata':'⏳ In verifica');
  badge.style.background = c.status==='verificata' ? '#093b27' : '#3a1f0f';
  badge.style.borderColor = c.status==='verificata' ? '#115b3b' : '#5a2f19';
  document.getElementById('clubAbout').textContent = `Pagina demo della società ${c.name}. Qui in app reale vedrai pannello, sponsor, Pre-Match, comunicazioni e file.`;
  document.getElementById('clubNext').textContent = c.next;
  document.getElementById('clubVenue').textContent = c.venue;
  document.getElementById('clubContact').textContent = c.contact;
  pushView('view-club-detail');
}

/* ---------- UTILS ---------- */
function labelSport(id){ return SPORTS.find(s=>s.id===id)?.name || id; }
function crumbHTML(){
  return `
    <span>Sport: <b>${labelSport(state.sport)}</b></span>
    ${state.region?`<span>Regione: <b>${state.region}</b></span>`:''}
    ${state.league?`<span>Campionato: <b>${state.league}</b></span>`:''}
  `;
}
function shade(c){ return `linear-gradient(180deg, ${c} 0%, #0f233f 120%)`; }
function border(c){ return c; }

/* ---------- ICONS (SVG inline) ---------- */
function ball(kind){
  const common='width="26" height="26" viewBox="0 0 24 24" fill="none"';
  switch(kind){
    case 'soccer': return `<svg ${common} aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="#cfe9ff" stroke-width="1.5"/><path d="M8.5 8.2l3.5-1.5 3.5 1.5-1 3.6-5 0-1-3.6Z" fill="#e9f7ff"/><path d="M7 12l-3 2 2 3 3-1.2M17 12l3 2-2 3-3-1.2" stroke="#cfe9ff" stroke-width="1.2"/></svg>`;
    case 'futsal': return `<svg ${common} aria-hidden="true"><circle cx="12" cy="12" r="10" fill="#ffd54a" stroke="#fff3b0"/><path d="M3 12h18M12 3v18" stroke="#7b5d00" stroke-width="1.5"/></svg>`;
    case 'basket': return `<svg ${common} aria-hidden="true"><circle cx="12" cy="12" r="10" fill="#ff934d" stroke="#ffd1b3"/><path d="M2 12h20M12 2c4 5 4 15 0 20M12 2c-4 5-4 15 0 20" stroke="#6b2a00" stroke-width="1.4"/></svg>`;
    case 'volley': return `<svg ${common} aria-hidden="true"><circle cx="12" cy="12" r="10" fill="#c9ccff" stroke="#eef0ff"/><path d="M5 8c5-4 10-2 14 2M4 12c5 4 10 6 16 2M6 16c4-3 8-4 12-2" stroke="#6166d6" stroke-width="1.3"/></svg>`;
    case 'rugby': return `<svg ${common} aria-hidden="true"><ellipse cx="12" cy="12" rx="10" ry="7" fill="#ffa64d" stroke="#ffe0bf"/><path d="M7 12h10M9 10l6 4" stroke="#6a3400" stroke-width="1.4"/></svg>`;
    case 'club': return `<svg ${common} aria-hidden="true"><rect x="3" y="5" width="18" height="14" rx="3" fill="#1b335a" stroke="#2e5289"/><circle cx="12" cy="12" r="4" fill="#47a5ff"/><path d="M12 9v6M9 12h6" stroke="#e9f4ff" stroke-width="1.4"/></svg>`;
    default: return '';
  }
}

/* ---------- AVVIO ---------- */
renderHome();
show('view-home', false);
</script>
</body>
</html>
